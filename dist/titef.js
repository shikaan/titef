!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e){const r={PENDING:"PENDING",SUCCESS:"SUCCESS",FAILURE:"FAILURE",IGNORED:"IGNORED"},s=Object.values(r);t.exports={RESULT:r,RESULTS:s,TEXT_FORMAT:{RED:"[31m",GREEN:"[32m",YELLOW:"[33m",RESET:"[0m",BOLD:"[1m",GREY:"[90m"}}},function(t,e,r){const s=r(2),{Reporter:o}=r(6);t.exports=new class extends s{constructor(t){super(t),this._reporters=[o],this.errorCode=0,this.subscribeSpecEvents(),this.subscribeSuiteEvents(),this.subscribeReporterEvents()}subscribeSpecEvents(){this.on("spec:start",(...t)=>{this._reporters.forEach(e=>{e.emit("spec:start",...t)})}),this.on("spec:success",(...t)=>{this._reporters.forEach(e=>{e.emit("spec:success",...t)})}),this.on("spec:failure",(...t)=>{this.errorCode=1,this._reporters.forEach(e=>{e.emit("spec:failure",...t)})}),this.on("spec:ignored",(...t)=>{this._reporters.forEach(e=>{e.emit("spec:ignored",...t)})}),this.on("spec:end",(...t)=>{this._reporters.forEach(e=>{e.emit("spec:end",...t)})})}subscribeSuiteEvents(){this.on("suite:start",(...t)=>{"test"!==process.env.TITEF_ENV&&this._reporters.forEach(e=>{e.emit("suite:start",...t)})}),this.on("suite:end",(...t)=>{"test"!==process.env.TITEF_ENV&&this._reporters.forEach(e=>{e.emit("suite:end",...t)})})}subscribeReporterEvents(){this.on("report:start",(...t)=>{this._reporters.forEach(e=>{e.emit("report:start",...t)})}),this.on("report:end",(...t)=>{this._reporters.forEach(e=>{e.emit("report:end",...t)})})}}("Event Bus")},function(t,e){t.exports=require("events")},function(t,e){t.exports={isNumber:t=>"[object Number]"===Object.prototype.toString.call(t),isFunction:t=>/\[object (Async)?Function]/.test(Object.prototype.toString.call(t)),isObject:t=>"[object Object]"===Object.prototype.toString.call(t)}},function(t,e,r){const{suite:s}=r(5),{spec:o,xspec:n}=r(10);t.exports={suite:s,spec:o,xspec:n}},function(t,e,r){const s=r(1),{log:o,isFunction:n,isObject:c}=r(3),{ERROR:i}=r(9);t.exports={suite:async(t,...e)=>{const r=String(t);s.emit("suite:start",r);const a={title:r,setup:()=>{},teardown:()=>{}},{options:p,callback:u}=((t,e)=>{const r=t[0],s=t[1];switch(t.length){case 1:if(!n(r))throw o.error("Second argument must be a function!"),new TypeError(i.INVALID_ARGUMENT);return{options:e,callback:r};case 2:if(!c(r))throw o.error("Second argument must be an object!"),new TypeError(i.INVALID_ARGUMENT);if(!n(s))throw o.error("Third argument must be a function!"),new TypeError(i.INVALID_ARGUMENT);return{options:Object.assign({},e,r),callback:s};default:throw o.error("Invalid arguments! Expected (title: string, options?: object, callback: function). Actual: ",t),new TypeError(i.INVALID_ARGUMENT)}})(e,a);if(!n(p.setup))throw o.error("Setup must be a function!"),new TypeError(i.INVALID_ARGUMENT);if(p.setup(),await u(),!n(p.teardown))throw o.error("Teardown must be a function!"),new TypeError(i.INVALID_ARGUMENT);p.teardown(),s.emit("suite:end")}}},function(t,e,r){const s=r(2),{printRecords:o}=r(7),n=r(1);t.exports={Reporter:new class extends s{constructor(t){super(t),this.on("database:process:end",async t=>{n.emit("report:start"),await o(t),n.emit("report:end")})}}("Reporter")}},function(t,e,r){const{isFunction:s}=r(3),{RESULT:o,TEXT_FORMAT:n}=r(0),c=(...t)=>{const e=[...t,n.RESET,"\n"];return process.stdout.write(e.map(String).join(""))},i=t=>s(t)?t.name:String(t);t.exports={printRecords:async t=>{const e={};Object.keys(t).forEach(r=>{c(n.BOLD,`SUITE: ${r}`),Object.values(t[r]).forEach(t=>{t.result===o.SUCCESS?c(n.GREEN,`[ âœ” ] ${t.title}`):t.result===o.IGNORED?c(n.YELLOW,`[ - ] ${t.title}`):t.result===o.PENDING?c(n.GREY,`[...] ${t.title}`):(c(n.RED,`[ âœ• ] ${t.title}`),e[`${t.suite} > ${t.title}`]=t.payload)})});const r=Object.entries(e);r.length&&(c(n.BOLD,"\nError details:"),r.forEach((t,e)=>{const r=t[0],s=t[1];c(n.BOLD,`\n${e+1}) ${r}`),(t=>{const e=(t=>t.message?t.message:t.toString().split(":").slice(-1)[0])(t);if((t=>"ERR_ASSERTION"===t.code||0===t.toString().indexOf("AssertionError"))(t)){const r=i(t.operator),s=i(t.expected),o=i(t.actual);c(`ASSERTION FAILURE: ${e}`),"fail"===r?c("\tUnexpected:\t",n.RED,`${o}`):!r&&t.expected&&t.actual&&(c("\tExpected:\t",n.GREEN,s),c("\tActual:\t\t",n.RED,o))}else c(`ERROR: ${e}`);c(n.GREY,t.stack)})(s)}))}}},,function(t,e){const r=new Map,s={setTimeout:setTimeout,setInterval:setInterval,clearTimeout:clearTimeout,clearInterval:clearInterval};t.exports={ERROR:{INVALID_ARGUMENT:"ERR_INVALID_ARGUMENT",INTERVAL:"ERR_CLEAR_INTERVAL",TIMEOUT:"ERR_CLEAR_TIMEOUT"},rejectMap:r,oldies:s}},function(t,e,r){const s=r(1);t.exports={spec:async(t,e)=>{s.emit("spec:start",t);try{await e(),s.emit("spec:success",t)}catch(e){s.emit("spec:failure",t,e)}s.emit("spec:end")},xspec:async t=>{s.emit("spec:start",t,Promise.resolve()),s.emit("spec:ignored",t),s.emit("spec:end")}}}]));